import numpy as np
import cv2
import matplotlib.pyplot as plt
from collections import Counter

# 파란 점들의 y좌표 예시 (사용자 데이터로 대체 필요)
y_coords_blue_points = [46, 30, 375, 386, 47, 30, 353, 374, 385, 48, 35, 353, 374, 385, 48, 37, 353, 373, 384, 47, 36, 353, 372, 383, 47, 36, 354, 372, 384, 46, 35, 355, 371, 384, 46, 35, 355, 369, 380, 45, 357, 369, 380, 45, 358, 369, 380, 45, 359, 370, 383, 45, 359, 370, 381, 44, 359, 370, 381, 44, 359, 370, 381, 44, 359, 370, 381, 44, 358, 369, 380, 44, 357, 368, 380, 44, 30, 312, 356, 367, 44, 31, 311, 355, 367, 113, 90, 44, 311, 323, 354, 115, 89, 44, 320, 355, 367, 116, 88, 45, 221, 321, 355, 116, 86, 72, 219, 320, 355, 117, 72, 44, 219, 321, 354, 117, 72, 43, 217, 321, 354, 117, 72, 44, 218, 322, 354, 118, 73, 42, 217, 322, 354, 118, 72, 38, 217, 322, 354, 118, 72, 39, 217, 324, 354, 118, 73, 40, 217, 323, 355, 118, 73, 42, 216, 322, 355, 118, 72, 42, 216, 355, 366, 117, 73, 42, 216, 355, 366, 117, 73, 43, 216, 356, 367, 117, 74, 43, 216, 356, 367, 117, 74, 43, 216, 358, 369, 117, 74, 43, 217, 358, 369, 117, 74, 44, 217, 324, 358, 117, 73, 42, 216, 357, 369, 214, 117, 42, 217, 325, 357, 117, 67, 42, 216, 323, 358, 214, 117, 68, 217, 326, 357, 117, 67, 43, 216, 324, 357, 116, 69, 42, 216, 357, 372, 214, 116, 69, 324, 357, 372, 214, 118, 69, 357, 373, 384, 213, 117, 69, 323, 357, 373, 214, 117, 68, 357, 373, 384, 214, 117, 68, 358, 373, 384, 214, 116, 68, 357, 373, 384, 116, 68, 216, 357, 373, 116, 68, 357, 373, 385, 116, 69, 357, 373, 384, 116, 67, 357, 373, 384, 116, 68, 357, 373, 384, 115, 68, 357, 373, 385, 115, 66, 357, 373, 384, 114, 66, 357, 373, 384, 66, 30, 357, 373, 385, 66, 30, 357, 373, 384, 67, 31, 358, 373, 384, 115, 67, 31, 358, 373, 384, 32, 358, 373, 384, 32, 358, 373, 384, 33, 358, 373, 384, 33, 358, 373, 384, 33, 358, 373, 384, 33, 358, 369, 380, 33, 357, 368, 379, 34, 358, 369, 380, 34, 357, 368, 379, 34, 357, 368, 379, 35, 356, 367, 378, 36, 356, 367, 378, 36, 356, 367, 378, 36, 357, 368, 379, 36, 358, 369, 380, 37, 358, 369, 380, 37, 358, 373, 385, 37, 358, 373, 387, 38, 358, 373, 388, 38, 358, 373, 392, 38, 358, 373, 393, 39, 358, 373, 393, 39, 358, 373, 392, 40, 358, 373, 392, 41, 30, 356, 373, 392, 40, 355, 366, 377, 41, 30, 355, 366, 377, 41, 30, 355, 366, 377, 41, 30, 354, 365, 376, 41, 30, 354, 365, 376, 42, 31, 354, 365, 376, 43, 32, 354, 365, 376, 43, 32, 319, 354, 365, 45, 34, 317, 354, 365, 46, 33, 317, 354, 365, 46, 32, 316, 327, 354, 47, 32, 316, 327, 353, 47, 32, 316, 327, 354, 46, 316, 327, 354, 46, 316, 327, 353, 46, 317, 328, 353, 46, 317, 328, 353, 46, 316, 327, 353, 46, 316, 327, 353, 46, 316, 327, 353, 46, 316, 327, 352, 46, 316, 327, 353, 46, 317, 328, 352, 46, 317, 328, 352, 46, 318, 329, 353, 46, 318, 329, 352]

# **1. 가장 빈도가 높은 y좌표 선별 (최빈값 계산)**
counter = Counter(y_coords_blue_points)
most_common_y = counter.most_common(5)  # 가장 자주 나타나는 상위 5개 y좌표
print(f"가장 많이 나타나는 y좌표: {most_common_y}")

# **2. 최빈값 기반 직선 그리기**
selected_y = list(set([y[0] for y in most_common_y]))  # 중복 제거

# **3. 이미지에 직선 그리기**
image = cv2.imread('difficult2.png', cv2.IMREAD_GRAYSCALE)
plt.imshow(image, cmap='gray')

# 선택된 y좌표에 따라 직선 표시
for y in selected_y:
    plt.axhline(y=y, color='red', linestyle='--')  # x축에 평행한 직선

plt.title('Most Frequent Y-Coordinate Lines')
plt.show()
